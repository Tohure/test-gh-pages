



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="description" content="Documetación del SDK de PagoEfectivo para la plataforma Android.">


        <link rel="canonical" href="https://github.com/orbismobile/">


        <meta name="author" content="Orbis Mobile">


        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">

        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">

        <meta name="lang:search.language" content="es">

        <meta name="lang:search.result.none" content="No se encontraron documentos">

        <meta name="lang:search.result.one" content="1 documento encontrado">

        <meta name="lang:search.result.other" content="# documentos encontrados">

        <meta name="lang:search.tokenizer" content="[\s\-]+">

      <link rel="shortcut icon" href="./assets/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.1, mkdocs-material-2.0.4">



        <title>PagoEfectivoSDK Documentation</title>



      <link rel="stylesheet" href="./assets/stylesheets/application-709eec9410.css">

        <link rel="stylesheet" href="./assets/stylesheets/application-23f75ab9c7.palette.css">



      <script src="./assets/javascripts/modernizr-e826f8942a.js"></script>



        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>

      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">



  </head>




      <body data-md-color-primary="amber" data-md-color-accent="orange">


    <svg class="md-svg">
      <defs>


          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>

      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>

      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/orbismobile" title="PagoEfectivoSDK Documentation" class="md-header-nav__button md-logo">

            <i class="md-icon">android</i>

        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">




            Android

        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">


            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>

<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>


      </div>

        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">






  <a href="https://github.com/PagoEfectivo/sdk-pe-android/" title="Ir al repositorio" class="md-source" data-md-source="github">

      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>

    <div class="md-source__repository">
      PagoEfectivo SDK
    </div>
  </a>

          </div>
        </div>

    </div>
  </nav>
</header>

    <div class="md-container">

      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">


              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">

        <i class="md-icon">android</i>

    </span>
    PagoEfectivoSDK Documentation
  </label>

    <div class="md-nav__source">






  <a href="https://github.com/PagoEfectivo/sdk-pe-android/" title="Ir al repositorio" class="md-source" data-md-source="github">

      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>

    <div class="md-source__repository">
      PagoEfectivo SDK
    </div>
  </a>

    </div>

  <ul class="md-nav__list" data-md-scrollfix>








  <li class="md-nav__item md-nav__item--active">

    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">




      <label class="md-nav__link md-nav__link--active" for="toc">
        Android
      </label>

    <a href="." title="Android" class="md-nav__link md-nav__link--active">
      Android
    </a>


<nav class="md-nav md-nav--secondary">





    <label class="md-nav__title" for="toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>

</li>

        <li class="md-nav__item">
  <a href="#pre-requisitos" title="Pre requisitos" class="md-nav__link">
    Pre requisitos
  </a>

</li>

        <li class="md-nav__item">
  <a href="#instalacion" title="Instalación" class="md-nav__link">
    Instalación
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#instalacion-manual" title="Instalación manual" class="md-nav__link">
    Instalación manual
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#1-primera-opcion" title="1. Primera Opción" class="md-nav__link">
    1. Primera Opción
  </a>

</li>

          <li class="md-nav__item">
  <a href="#2-segunda-opcion" title="2. Segunda Opción" class="md-nav__link">
    2. Segunda Opción
  </a>

</li>

      </ul>
    </nav>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#inicializar-pagoefectivo-sdk" title="Inicializar PagoEfectivo SDK" class="md-nav__link">
    Inicializar PagoEfectivo SDK
  </a>

</li>

        <li class="md-nav__item">
  <a href="#uso-de-pagoefectivo-sdk-cips-functions" title="Uso de PagoEfectivo SDK | CIP's Functions" class="md-nav__link">
    Uso de PagoEfectivo SDK | CIP's Functions
  </a>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-generar-cip" title="PagoEfectivo SDK | Generar CIP" class="md-nav__link">
    PagoEfectivo SDK | Generar CIP
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#1-preparar-objeto-ciprequest" title="1. Preparar Objeto CipRequest" class="md-nav__link">
    1. Preparar Objeto CipRequest
  </a>

</li>

          <li class="md-nav__item">
  <a href="#2-implementar-ciplistener" title="2. Implementar CipListener" class="md-nav__link">
    2. Implementar CipListener
  </a>

</li>

          <li class="md-nav__item">
  <a href="#3-metodo-generatecip" title="3. Método generateCip()" class="md-nav__link">
    3. Método generateCip()
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-listar-cips" title="PagoEfectivo SDK | Listar CIP's" class="md-nav__link">
    PagoEfectivo SDK | Listar CIP's
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#1-preparar-cips" title="1. Preparar Cip(s)" class="md-nav__link">
    1. Preparar Cip(s)
  </a>

</li>

          <li class="md-nav__item">
  <a href="#2-implementar-searchlistener" title="2. Implementar SearchListener" class="md-nav__link">
    2. Implementar SearchListener
  </a>

</li>

          <li class="md-nav__item">
  <a href="#3-metodo-searchcip" title="3. Método searchCip()" class="md-nav__link">
    3. Método searchCip()
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-tratamiento-de-errores" title="PagoEfectivo SDK | Tratamiento de Errores" class="md-nav__link">
    PagoEfectivo SDK | Tratamiento de Errores
  </a>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-proguard-configurations" title="PagoEfectivo SDK | Proguard Configurations" class="md-nav__link">
    PagoEfectivo SDK | Proguard Configurations
  </a>

</li>



    </ul>

</nav>

  </li>


  </ul>
</nav>
                  </div>
                </div>
              </div>


              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">

<nav class="md-nav md-nav--secondary">





    <label class="md-nav__title" for="toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>

</li>

        <li class="md-nav__item">
  <a href="#pre-requisitos" title="Pre requisitos" class="md-nav__link">
    Pre requisitos
  </a>

</li>

        <li class="md-nav__item">
  <a href="#instalacion" title="Instalación" class="md-nav__link">
    Instalación
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#instalacion-manual" title="Instalación manual" class="md-nav__link">
    Instalación manual
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#1-primera-opcion" title="1. Primera Opción" class="md-nav__link">
    1. Primera Opción
  </a>

</li>

          <li class="md-nav__item">
  <a href="#2-segunda-opcion" title="2. Segunda Opción" class="md-nav__link">
    2. Segunda Opción
  </a>

</li>

      </ul>
    </nav>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#inicializar-pagoefectivo-sdk" title="Inicializar PagoEfectivo SDK" class="md-nav__link">
    Inicializar PagoEfectivo SDK
  </a>

</li>

        <li class="md-nav__item">
  <a href="#uso-de-pagoefectivo-sdk-cips-functions" title="Uso de PagoEfectivo SDK | CIP's Functions" class="md-nav__link">
    Uso de PagoEfectivo SDK | CIP's Functions
  </a>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-generar-cip" title="PagoEfectivo SDK | Generar CIP" class="md-nav__link">
    PagoEfectivo SDK | Generar CIP
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#1-preparar-objeto-ciprequest" title="1. Preparar Objeto CipRequest" class="md-nav__link">
    1. Preparar Objeto CipRequest
  </a>

</li>

          <li class="md-nav__item">
  <a href="#2-implementar-ciplistener" title="2. Implementar CipListener" class="md-nav__link">
    2. Implementar CipListener
  </a>

</li>

          <li class="md-nav__item">
  <a href="#3-metodo-generatecip" title="3. Método generateCip()" class="md-nav__link">
    3. Método generateCip()
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-listar-cips" title="PagoEfectivo SDK | Listar CIP's" class="md-nav__link">
    PagoEfectivo SDK | Listar CIP's
  </a>

    <nav class="md-nav">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#1-preparar-cips" title="1. Preparar Cip(s)" class="md-nav__link">
    1. Preparar Cip(s)
  </a>

</li>

          <li class="md-nav__item">
  <a href="#2-implementar-searchlistener" title="2. Implementar SearchListener" class="md-nav__link">
    2. Implementar SearchListener
  </a>

</li>

          <li class="md-nav__item">
  <a href="#3-metodo-searchcip" title="3. Método searchCip()" class="md-nav__link">
    3. Método searchCip()
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-tratamiento-de-errores" title="PagoEfectivo SDK | Tratamiento de Errores" class="md-nav__link">
    PagoEfectivo SDK | Tratamiento de Errores
  </a>

</li>

        <li class="md-nav__item">
  <a href="#pagoefectivo-sdk-proguard-configurations" title="PagoEfectivo SDK | Proguard Configurations" class="md-nav__link">
    PagoEfectivo SDK | Proguard Configurations
  </a>

</li>



    </ul>

</nav>
                  </div>
                </div>
              </div>


          <div class="md-content">
            <article class="md-content__inner md-typeset">


                  <a href="https://github.com/PagoEfectivo/sdk-pe-android/edit/master/docs/index.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>


                <h1 id="pagoefectivo-sdk-para-android"><strong>PagoEfectivo SDK para Android</strong><a class="headerlink" href="#pagoefectivo-sdk-para-android" title="Permanent link">&para;</a></h1>
<hr />
<h1 align="center">
  <a href="https://github.com/PagoEfectivo">
    <img src="./assets/android_pagoefectivo_logo.png" alt="Orbis Mobile Developers" width="25%"></a>
  </a>
</h1>

<h3 id="overview"><strong>Overview</strong><a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<hr />
<p><em>PagoEfectivo SDK</em> le permitirá implementar de forma rápida y sencilla transacciones online a través de la plataforma de <em>PagoEfectivo</em> para teléfonos Android.</p>
<p>En el siguiente manual encontrará todo lo necesario para poder empezar la implementación del SDK, así como la forma correcta de implementar sus principales funciones tales como: <em>Generar un CIP</em>, <em>Listar CIPS</em>, etc.</p>
<h3 id="pre-requisitos"><strong>Pre requisitos</strong><a class="headerlink" href="#pre-requisitos" title="Permanent link">&para;</a></h3>
<hr />
<ul>
<li><a href="https://developer.android.com/studio/index.html">Android Studio</a> 1.5.* o superior</li>
<li>JDK 7 ó superior</li>
<li>Versión actualizada del Android SDK</li>
<li>Android API 16 en adelante (Android 4.1 en adelante)</li>
</ul>
<h3 id="instalacion"><strong>Instalación</strong><a class="headerlink" href="#instalacion" title="Permanent link">&para;</a></h3>
<hr />
<h4 id="instalacion-manual"><strong>Instalación manual</strong><a class="headerlink" href="#instalacion-manual" title="Permanent link">&para;</a></h4>
<p>Para poder hacer uso del SDK de PagoEfectivo, necesitamos descargar el sdk através el siguiente <a href="https://github.com/orbismobile">link</a></p>
<p>Ahora agregaremos un nuevo modulo a nuestro proyecto, para ello tenemos 2 opciones</p>
<h5 id="1-primera-opcion"><strong>1. Primera Opción</strong><a class="headerlink" href="#1-primera-opcion" title="Permanent link">&para;</a></h5>
<p>Agregaremos un nuevo modulo para ello seguimos los siguientes pasos:</p>
<ol>
<li>Nos dirigimos a file -&gt; seleccionamos new -&gt; click en new</li>
</ol>
<p><img alt="PagoEfectivoSDK par Android" src="./assets/new_module_first_toption.png" /></p>
<ol>
<li>Ahora agregaremos un nuevo modulo ya sea importando un archivo .jar o .aar</li>
</ol>
<p><img alt="PagoEfectivoSDK par Android" src="./assets/new_module_first_option1.png" /></p>
<h5 id="2-segunda-opcion"><strong><em>2. Segunda Opción</em></strong><a class="headerlink" href="#2-segunda-opcion" title="Permanent link">&para;</a></h5>
<ol>
<li>
<p>Damos click en el icono "Project Structure" de Android Studio</p>
<p><img alt="PagoEfectivoSDK par Android" src="./assets/project_structure_icon.png" /> </p>
</li>
<li>
<p>Ahora damos click en el icono "+", y luego nos aparecerá la ventana de nuevo modulo que esta en apartado <a href="./../#1-primera-opcion">Primera opción.</a></p>
<p><img alt="PagoEfectivoSDK par Android" src="./assets/new_module_icon_plus.png" /></p>
</li>
<li>
<p>Ahora seleccionamos la ruta del sdk de PagoEfectivo (.aar) y damos click en finish.</p>
<p><img alt="PagoEfectivoSDK par Android" src="./assets/new_import_module.png" /></p>
</li>
<li>
<p>Ahora podremos ver que el modulo se ha agregado a la estructura de nuestro proyecto</p>
<p><img alt="PagoEfectivoSDK par Android" src="./assets/new_module_added.png" /></p>
</li>
</ol>
<p>Finalmente no olvidar compilar el nuevo modulo con tu aplicación, en el archivo build.gradle dentro del modulo app
agregar las siguiente </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">dependencies</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="n">compile</span> <span class="nf">project</span><span class="o">(</span><span class="s1">&#39;:pagoefectivosdk&#39;</span><span class="o">)</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h3 id="inicializar-pagoefectivo-sdk"><strong>Inicializar PagoEfectivo SDK</strong><a class="headerlink" href="#inicializar-pagoefectivo-sdk" title="Permanent link">&para;</a></h3>
<hr />
<p>Para poder implementar las funciones CIPs de PagoEfectivo en tu proyecto, es necesario inicializar la librería. Para lo cual necesitas los siguientes valores antes de empezar:</p>
<ul>
<li>Service Id</li>
<li>Access Key</li>
<li>Secret Key</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><em>Si aún no tienes tus Keys de conexión por favor comunicarse <a href="mailto:feedback@pagoefectivo.pe">aquí</a></em></p>
</div>
<p>Inicializar la librería de PagoEfectivo es muy simple, sólo necesitas llamar a la siguiente línea:</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">PagoEfectivoSdk</span> <span class="n">pagoEfectivoSdk</span> <span class="o">=</span> <span class="n">PagoEfectivoSdk</span><span class="o">.</span><span class="na">inicialize</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="py">pagoEfectivoSdk</span> <span class="p">=</span> <span class="n">PagoEfectivoSdk</span><span class="p">.</span><span class="n">inicialize</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Luego en el objeto <strong><em>PagoEfectivoSdk</em></strong>, es necesario setear las variables mencionadas anteriormente.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">pagoEfectivoSdk</span><span class="o">.</span><span class="na">setServiceId</span><span class="o">(</span><span class="n">SERVICEID</span><span class="o">);</span>
    <span class="n">pagoEfectivoSdk</span><span class="o">.</span><span class="na">setAccessKey</span><span class="o">(</span><span class="s">&quot;ACCESKEY&quot;</span><span class="o">);</span>
    <span class="n">pagoEfectivoSdk</span><span class="o">.</span><span class="na">setSecretKey</span><span class="o">(</span><span class="s">&quot;SECRETKEY&quot;</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">pagoEfectivoSdk</span><span class="p">.</span><span class="n">setServiceId</span><span class="p">(</span><span class="n">SERVICEID</span><span class="p">)</span>
    <span class="n">pagoEfectivoSdk</span><span class="p">.</span><span class="n">setAccessKey</span><span class="p">(</span><span class="s">&quot;ACCESKEY&quot;</span><span class="p">)</span>
    <span class="n">pagoEfectivoSdk</span><span class="p">.</span><span class="n">setSecretKey</span><span class="p">(</span><span class="s">&quot;SECRETKEY&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><em>SandBox</em></strong>
En ambos lenguajes, si se desease trabajar en modo SandBox (ambientes PRE), se tiene que setear la siguiente propiedad en true, de no hacerse, el SDK siempré trabajara por default apuntando a Producción.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">pagoEfectivoSdk</span><span class="o">.</span><span class="na">setSandBox</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p>Como se observa, el objeto necesita un contexto para inicializarse. El cual puede ser obtenido de cualquier actividad y/o fragmento. Se recomienda obtenerlo de la subclase <strong><em>Application</em></strong> en el método <strong><em>onCreate</em></strong>.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyApplication</span> <span class="kd">extends</span> <span class="n">Application</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>
        <span class="n">PagoEfectivoSdk</span> <span class="n">pagoEfectivoSdk</span> <span class="o">=</span> <span class="n">PagoEfectivoSdk</span><span class="o">.</span><span class="na">inicialize</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="n">pagoEfectivoSdk</span><span class="o">.</span><span class="na">setServiceId</span><span class="o">(</span><span class="n">SERVICEID</span><span class="o">);</span>
        <span class="n">pagoEfectivoSdk</span><span class="o">.</span><span class="na">setAccessKey</span><span class="o">(</span><span class="s">&quot;ACCESKEY&quot;</span><span class="o">);</span>
        <span class="n">pagoEfectivoSdk</span><span class="o">.</span><span class="na">setSecretKey</span><span class="o">(</span><span class="s">&quot;SECRETKEY&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MyApplication</span> <span class="p">:</span> <span class="n">Application</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">val</span> <span class="py">pagoEfectivoSdk</span> <span class="p">=</span> <span class="n">PagoEfectivoSdk</span><span class="p">.</span><span class="n">inicialize</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="n">pagoEfectivoSdk</span><span class="p">.</span><span class="n">setServiceId</span><span class="p">(</span><span class="n">SERVICEID</span><span class="p">)</span>
        <span class="n">pagoEfectivoSdk</span><span class="p">.</span><span class="n">setAccessKey</span><span class="p">(</span><span class="s">&quot;ACCESKEY&quot;</span><span class="p">)</span>
        <span class="n">pagoEfectivoSdk</span><span class="p">.</span><span class="n">setSecretKey</span><span class="p">(</span><span class="s">&quot;SECRETKEY&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>No olvidar que al implementar nuestra propia subclase <strong><em>Application</em></strong> es necesario declarar su nombre en el <strong><em>AndroidManifest.xml</em></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">&lt;application</span>
  <span class="na">android:name=</span><span class="s">&quot;.MyApplication&quot;</span>
  <span class="err">...</span>
<span class="nt">/&gt;</span>
</pre></div>
</td></tr></table>

<h3 id="uso-de-pagoefectivo-sdk-cips-functions"><strong>Uso de PagoEfectivo SDK | CIP's Functions</strong><a class="headerlink" href="#uso-de-pagoefectivo-sdk-cips-functions" title="Permanent link">&para;</a></h3>
<hr />
<p>Con el SDK ya instalado en nuestro IDE las llamadas a las funciones para CIP's serán muy sencillas.</p>
<p><strong>Paso 1:</strong>
Crear una variable en tu clase de tipo <strong><em>PagoEfectivoSdk</em></strong></p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">PagoEfectivoSdk</span> <span class="n">instance</span><span class="o">;</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="py">instance</span>
</pre></div>
</td></tr></table>

<p><strong>Paso 2:</strong>
Inicializar tu variable con el método <strong><em>getInstance()</em></strong>.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">instance</span> <span class="o">=</span> <span class="n">PagoEfectivoSdk</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">instance</span> <span class="p">=</span> <span class="n">PagoEfectivoSdk</span><span class="p">.</span><span class="n">getInstance</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p><strong>Paso 3:</strong>
Llamar las funciones que requieras!</p>
<p><strong><em>generateCip()</em></strong></p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">instance</span><span class="o">.</span><span class="na">generateCip</span><span class="o">(</span><span class="n">Language</span><span class="o">.</span><span class="na">SPANISH_PERU</span><span class="o">,</span> <span class="n">cipRequest</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">instance</span><span class="p">.</span><span class="n">generateCip</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">SPANISH_PERU</span><span class="p">,</span> <span class="n">cipRequest</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><em>searchCip()</em></strong></p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">instance</span><span class="o">.</span><span class="na">searchCip</span><span class="o">(</span><span class="n">Language</span><span class="o">.</span><span class="na">SPANISH_PERU</span><span class="o">,</span> <span class="n">requestList</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">instance</span><span class="p">.</span><span class="n">searchCip</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">SPANISH_PERU</span><span class="p">,</span> <span class="n">requestList</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h3 id="pagoefectivo-sdk-generar-cip"><strong>PagoEfectivo SDK | Generar CIP</strong><a class="headerlink" href="#pagoefectivo-sdk-generar-cip" title="Permanent link">&para;</a></h3>
<hr />
<p>Para poder generar un CIP se tiene que tener en cuenta los siguientes 3 pasos:</p>
<ul>
<li>Preparar objeto <strong><em>CipRequest</em></strong></li>
<li>Implementar <strong><em>CipListener</em></strong></li>
<li>Llamar al método <strong><em>generateCip()</em></strong></li>
</ul>
<p>Veamos cómo hacerlo en detalle:</p>
<h4 id="1-preparar-objeto-ciprequest"><strong>1. Preparar Objeto CipRequest</strong><a class="headerlink" href="#1-preparar-objeto-ciprequest" title="Permanent link">&para;</a></h4>
<p>La petición para crear un CIP requiere de los siguientes campos:</p>
<ul>
<li>currency (Requerido)</li>
<li>amount (Requerido)</li>
<li>transactionCode (Requerido)</li>
<li>adminEmail (Opcional)</li>
<li>dateExpiry (Opcional)</li>
<li>paymentConcept (Opcional)</li>
<li>additionalData (Opcional)</li>
<li>userEmail (Requerido)</li>
<li>userName (Opcional)</li>
<li>userLastName (Opcional)</li>
<li>userUbigeo (Opcional)</li>
<li>userCountry (Opcional)</li>
<li>userDocumentType (Opcional)</li>
<li>userDocumentNumber (Opcional)</li>
<li>userPhone (Opcional)</li>
<li>userCodeCountry (Opcional)</li>
</ul>
<p>Todos estos campos los puedes setear declarando un objeto de tipo CipRequest. Aquí te mostramos un pequeño ejemplo con algunos campos.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">CipRequest</span> <span class="n">cipRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CipRequest</span><span class="o">();</span>
    <span class="n">cipRequest</span><span class="o">.</span><span class="na">setUserEmail</span><span class="o">(</span><span class="s">&quot;user@gmail.com&quot;</span><span class="o">);</span>
    <span class="n">cipRequest</span><span class="o">.</span><span class="na">setTransactionCode</span><span class="o">(</span><span class="s">&quot;777&quot;</span><span class="o">);</span>
    <span class="n">cipRequest</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="mf">777.77</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="py">cipRequest</span> <span class="p">=</span> <span class="n">CipRequest</span><span class="p">()</span>
    <span class="n">cipRequest</span><span class="p">.</span><span class="n">userEmail</span> <span class="p">=</span> <span class="s">&quot;user@gmail.com&quot;</span>
    <span class="n">cipRequest</span><span class="p">.</span><span class="n">transactionCode</span> <span class="p">=</span> <span class="s">&quot;777&quot;</span>
    <span class="n">cipRequest</span><span class="p">.</span><span class="n">amount</span> <span class="p">=</span> <span class="m">777.77</span>
</pre></div>
</td></tr></table>

<p>Para el caso de <strong><em>currency</em></strong> y <strong><em>userDocumentType</em></strong>, se debe setear los campos con variables predefinidas por el SDK. como ejemplo de moneda a usar <em>USD</em> y de tipo de documento <em>DNI</em>.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">cipRequest</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
    <span class="n">cipRequest</span><span class="o">.</span><span class="na">setUserDocumentType</span><span class="o">(</span><span class="n">DocumentType</span><span class="o">.</span><span class="na">DNI</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">cipRequest</span><span class="p">.</span><span class="n">currency</span> <span class="p">=</span> <span class="n">Currency</span><span class="p">.</span><span class="n">USD</span>
    <span class="n">cipRequest</span><span class="p">.</span><span class="n">userDocumentType</span> <span class="p">=</span> <span class="n">DocumentType</span><span class="p">.</span><span class="n">DNI</span>
</pre></div>
</td></tr></table>

<p>El uso de los objetos <strong><em>Currency</em></strong> o <strong><em>DocumentType</em></strong> les permite acceder a las opciones disponibles para cada campo respectivamente.</p>
<blockquote>
<p><strong>Currency</strong>
<img alt="Currency" src="./assets/setCurrencyJava.png" /></p>
</blockquote>
<hr />
<blockquote>
<p><strong>DocumentType</strong>
<img alt="DocumentType" src="./assets/setDocumentTypeJava.png" />)</p>
</blockquote>
<p>Hecho todo lo anterior, se procede con el paso número 2.</p>
<h4 id="2-implementar-ciplistener"><strong>2. Implementar CipListener</strong><a class="headerlink" href="#2-implementar-ciplistener" title="Permanent link">&para;</a></h4>
<p>El SDK provee un callback que le permite tener los siguientes 3 estados al generar un CIP</p>
<ul>
<li>OnCipSuccessful | Evento lanzado cuando el CIP fue generado correctamente, devolviendo un objeto de tipo CIP con todos sus datos respectivos.</li>
<li>OnCipError | Evento lanzado cuando sucedió un error al generar el CIP, devuelve una lista de todos los errores o error ocurridos durante el proceso (Ver apartado de Errores).</li>
<li>OnCipFailure | Evento lanzado cuando sucedió un error de conexión con los servicios de PagoEfectivo, devolviendo un mensaje de error (String) de lo sucedido.</li>
</ul>
<p>Para poder llamar los callbacks de la generación de CIP, basta con implementar en la clase donde se esté trabajando, la interfaz <strong><em>CipListener</em></strong></p>
<p><strong>Ejemplo de implementación en una Actividad</strong></p>
<blockquote>
<p><strong>Java</strong>
<img alt="CipListener" src="./assets/ciplistenerJava.png" /></p>
<p><strong>Kotlin</strong>
<img alt="CipListener" src="./assets/cipListenerKotlin.png" /></p>
</blockquote>
<p>Cuando la interfaz es implementada, sus respectivos métodos son llamados en la clase.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">OnCipSuccessful</span><span class="o">(</span><span class="n">Cip</span> <span class="n">cip</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//TODO: CODE HERE</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">OnCipError</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CipError</span><span class="o">&gt;</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//TODO: CODE HERE</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">OnCipFailure</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//TODO: CODE HERE</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">OnCipSuccessful</span><span class="p">(</span><span class="n">cip</span><span class="p">:</span> <span class="n">Cip</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">TODO</span><span class="p">(</span><span class="s">&quot;CODE HERE&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">OnCipError</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">CipError</span><span class="p">&gt;)</span> <span class="p">{</span>
        <span class="n">TODO</span><span class="p">(</span><span class="s">&quot;CODE HERE&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">OnCipFailure</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">TODO</span><span class="p">(</span><span class="s">&quot;CODE HERE&quot;</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Con los pasos anteriores hechos, se procede a llamar a la función de generación de CIP's.</p>
<h4 id="3-metodo-generatecip"><strong>3. Método generateCip()</strong><a class="headerlink" href="#3-metodo-generatecip" title="Permanent link">&para;</a></h4>
<p>El método generateCip() recibe 3 parámetros:</p>
<ul>
<li>Objeto CipRequest | Generado en el paso 1</li>
<li>CipListener Callback | Generado en el paso 2</li>
<li>Lenguaje de la petición (Language Object)</li>
</ul>
<p>Para el lenguaje de la petición, el SDK provee una clase que le dará los idiomas soportados por el SDK. Esta es la clase Language.</p>
<blockquote>
<p><strong>Clase Language</strong>
<img alt="Language" src="./assets/languageClass.png" /></p>
</blockquote>
<p>Teniendo definido los 3 parámetros, el método se llama con una instancia de la clase PagoEfectivoSdk. Aquí te mostramos un ejemplo usando como idioma predefinido el idioma SPANISH_PERU</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">PagoEfectivoSdk</span> <span class="n">instance</span><span class="o">;</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="n">PagoEfectivoSdk</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="n">instance</span><span class="o">.</span><span class="na">generateCip</span><span class="o">(</span><span class="n">Language</span><span class="o">.</span><span class="na">SPANISH_PERU</span><span class="o">,</span> <span class="n">cipRequest</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="py">instance</span> <span class="p">=</span> <span class="n">PagoEfectivoSdk</span><span class="p">.</span><span class="n">getInstance</span><span class="p">()</span>

    <span class="n">instance</span><span class="p">.</span><span class="n">generateCip</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">SPANISH_PERU</span><span class="p">,</span> <span class="n">cipRequest</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Cabe mencionar que en caso no se setee el lenguaje en la petición, esté será por default <strong><em>SPANISH_PERU</em></strong>.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">PagoEfectivoSdk</span> <span class="n">instance</span><span class="o">;</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="n">PagoEfectivoSdk</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="n">instance</span><span class="o">.</span><span class="na">generateCip</span><span class="o">(</span><span class="n">cipRequest</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="py">instance</span> <span class="p">=</span> <span class="n">PagoEfectivoSdk</span><span class="p">.</span><span class="n">getInstance</span><span class="p">()</span>

    <span class="n">instance</span><span class="p">.</span><span class="n">generateCip</span><span class="p">(</span><span class="n">cipRequest</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>El CIP generado por este método, se podrá consumir desde el llamado del callback OnCipSuccessful(), método que devuelve un objeto CIP resultante del método anterior, con todos sus métodos getters respectivos para poder consumirlo y usarlo como convenga en la aplicación cliente.</p>
<p><strong>OnCipSuccessful()</strong></p>
<blockquote>
<p>Java
<img alt="OnCipSuccessful" src="./assets/cipSuccessJava.png" /></p>
</blockquote>
<hr />
<blockquote>
<p>Kotlin
<img alt="OnCipSuccessful" src="./assets/cipSuccessKotlin.png" /></p>
</blockquote>
<h3 id="pagoefectivo-sdk-listar-cips"><strong>PagoEfectivo SDK | Listar CIP's</strong><a class="headerlink" href="#pagoefectivo-sdk-listar-cips" title="Permanent link">&para;</a></h3>
<hr />
<p>En la función de Listar CIP's se consideran los siguientes 3 pasos:</p>
<ul>
<li>Preparar un CIP o una lista de CIP's a buscar (elementos de tipo Int)</li>
<li>Implementar <strong><em>SearchListener</em></strong></li>
<li>Llamar al método <strong><em>searchCip()</em></strong></li>
</ul>
<h4 id="1-preparar-cips"><strong>1. Preparar Cip(s)</strong><a class="headerlink" href="#1-preparar-cips" title="Permanent link">&para;</a></h4>
<p>Para buscar CIPs podemos hacerlo directamente con una variable de tipo int o con una lista de este mismo tipo, si se desea buscar más de un CIP al mismo tiempo:</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="c1">//Only one Cip</span>
    <span class="kt">int</span> <span class="n">cip</span> <span class="o">=</span> <span class="mi">7777777</span><span class="o">;</span>

    <span class="c1">//Multiple Cips</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">listCips</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">listCips</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">7777777</span><span class="o">);</span>
    <span class="n">listCips</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">3333333</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="c1">//Only one Cip</span>
    <span class="k">val</span> <span class="py">cip</span> <span class="p">=</span> <span class="m">7777777</span>

    <span class="c1">//Multiple Cips</span>
    <span class="k">val</span> <span class="py">listCips</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;()</span>
    <span class="n">listCips</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">7777777</span><span class="p">)</span>
    <span class="n">listCips</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">3333333</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="2-implementar-searchlistener"><strong>2. Implementar SearchListener</strong><a class="headerlink" href="#2-implementar-searchlistener" title="Permanent link">&para;</a></h4>
<p>El SDK provee un callback que le permite tener los siguientes 3 estados al generar un CIP</p>
<ul>
<li>OnSearchSuccessful | Evento lanzado cuando la búsqueda se efectuó correctamente, devolviendo una lista de objetos de tipo CipSearch con todos sus datos respectivos. Cabe resaltar en este punto que si se envió una lista con varios Cips a buscar y uno o más de ellos son inexistentes o erróneos, el método devolverá una lista con los cips correctos, y los incorrectos aparecerán con una estructura vacía por ser valores no encontrados.</li>
<li>OnCipError | Evento lanzado cuando sucedió un error al buscar CIPs, devuelve una lista de todos los errores o error ocurridos durante el proceso (Ver apartado de Errores).</li>
<li>OnCipFailure | Evento lanzado cuando sucedió un error de conexión con los servicios de PagoEfectivo, devolviendo un mensaje de error (String) con lo sucedido.</li>
</ul>
<p>Para poder llamar los callbacks de la búsqueda de CIPs, basta con implementar en la clase donde se esté trabajando, la interfaz <strong><em>SearchListener</em></strong></p>
<p><strong>Ejemplo de implementación en una Actividad</strong></p>
<blockquote>
<p><strong>Java</strong>
<img alt="SearchListener" src="./assets/searchListenerJava.png" />
<strong>Kotlin</strong>
<img alt="SearchListener" src="./assets/searchListenerKotlin.png" /></p>
</blockquote>
<p>Cuando la interfaz es implementada, sus respectivos métodos son llamados en la clase.</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">OnSearchSuccessful</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CipError</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//TODO: CODE HERE</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">OnCipError</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CipError</span><span class="o">&gt;</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//TODO: CODE HERE</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">OnCipFailure</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//TODO: CODE HERE</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">OnSearchSuccessful</span><span class="p">(</span><span class="n">list</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">CipSearch</span><span class="p">&gt;)</span> <span class="p">{</span>
        <span class="n">TODO</span><span class="p">(</span><span class="s">&quot;CODE HERE&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">OnCipError</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">CipError</span><span class="p">&gt;)</span> <span class="p">{</span>
        <span class="n">TODO</span><span class="p">(</span><span class="s">&quot;CODE HERE&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">OnCipFailure</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">TODO</span><span class="p">(</span><span class="s">&quot;CODE HERE&quot;</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Con los pasos anteriores hechos, se procede a llamar a la función de búsqueda de CIP's.</p>
<h4 id="3-metodo-searchcip"><strong>3. Método searchCip()</strong><a class="headerlink" href="#3-metodo-searchcip" title="Permanent link">&para;</a></h4>
<p>El método searchCip() recibe 3 parámetros:</p>
<ul>
<li>CIP o CIPs a buscar | Generado en el paso 1</li>
<li>SearchListener Callback | Generado en el paso 2</li>
<li>Lenguaje de la petición (Language Object)</li>
</ul>
<p>Para el lenguaje de la petición, el SDK provee una clase que le dará los idiomas soportados por el SDK. Esta es la clase: Language.</p>
<blockquote>
<p><strong>Clase Language</strong>
<img alt="Language" src="./assets/language.png" /></p>
</blockquote>
<p>Teniendo definido los 3 parámetros, el método se llama con una instancia de la clase PagoEfectivoSdk. Aquí te mostramos un ejemplo usando como idioma predefinido el idioma SPANISH_PERU</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">PagoEfectivoSdk</span> <span class="n">instance</span><span class="o">;</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="n">PagoEfectivoSdk</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="c1">//One Cip</span>
    <span class="n">instance</span><span class="o">.</span><span class="na">searchCip</span><span class="o">(</span><span class="n">Language</span><span class="o">.</span><span class="na">SPANISH_PERU</span><span class="o">,</span> <span class="n">cip</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>

    <span class="c1">//Multiple Cips</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">listCips</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">listCips</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">7777777</span><span class="o">);</span>
    <span class="n">listCips</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">3333333</span><span class="o">);</span>

    <span class="n">instance</span><span class="o">.</span><span class="na">searchCip</span><span class="o">(</span><span class="n">Language</span><span class="o">.</span><span class="na">SPANISH_PERU</span><span class="o">,</span> <span class="n">listCips</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="py">instance</span><span class="p">:</span> <span class="n">PagoEfectivoSdk</span>
    <span class="n">instance</span> <span class="p">=</span> <span class="n">PagoEfectivoSdk</span><span class="p">.</span><span class="n">getInstance</span><span class="p">()</span>

    <span class="c1">//One Cip</span>
    <span class="n">instance</span><span class="p">.</span><span class="n">searchCip</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">SPANISH_PERU</span><span class="p">,</span> <span class="n">cip</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>

    <span class="c1">//Multiple Cips</span>
    <span class="k">val</span> <span class="py">listCips</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;()</span>
    <span class="n">listCips</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">7777777</span><span class="p">)</span>
    <span class="n">listCips</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">3333333</span><span class="p">)</span>

    <span class="n">instance</span><span class="p">.</span><span class="n">searchCip</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">SPANISH_PERU</span><span class="p">,</span> <span class="n">listCips</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Cabe mencionar que en caso no se setee el lenguaje en la petición, esté será por default <strong><em>SPANISH_PERU</em></strong> tal como sucede en el generateCip().</p>
<p><strong>Java</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">PagoEfectivoSdk</span> <span class="n">instance</span><span class="o">;</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="n">PagoEfectivoSdk</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="c1">//One Cip</span>
    <span class="n">instance</span><span class="o">.</span><span class="na">searchCip</span><span class="o">(</span><span class="n">cip</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>

    <span class="c1">//Multiple Cips</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">listCips</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">listCips</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">7777777</span><span class="o">);</span>
    <span class="n">listCips</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">3333333</span><span class="o">);</span>

    <span class="n">instance</span><span class="o">.</span><span class="na">searchCip</span><span class="o">(</span><span class="n">listCips</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p><strong>Kotlin</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="py">instance</span><span class="p">:</span> <span class="n">PagoEfectivoSdk</span>
    <span class="n">instance</span> <span class="p">=</span> <span class="n">PagoEfectivoSdk</span><span class="p">.</span><span class="n">getInstance</span><span class="p">()</span>

    <span class="c1">//One Cip</span>
    <span class="n">instance</span><span class="p">.</span><span class="n">searchCip</span><span class="p">(</span><span class="n">cip</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>

    <span class="c1">//Multiple Cips</span>
    <span class="k">val</span> <span class="py">listCips</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;()</span>
    <span class="n">listCips</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">7777777</span><span class="p">)</span>
    <span class="n">listCips</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">3333333</span><span class="p">)</span>

    <span class="n">instance</span><span class="p">.</span><span class="n">searchCip</span><span class="p">(</span><span class="n">listCips</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>El CIP(s) resultante(s) de esta función, se podrá(n) consumir desde el llamado del callback OnSearchSuccessful(), método que devuelve todos los CIPs buscados por el usuario a través de una lista de objetos <em>CipSearch</em>.</p>
<p><strong>OnSearchSuccessful()</strong></p>
<blockquote>
<p><strong>Java</strong>
<img alt="OnSearchSuccessful" src="./assets/searchSuccessJava.png" />
<strong>Kotlin</strong>
<img alt="OnSearchSuccessful" src="./assets/searchSuccessKotlin.png" /></p>
</blockquote>
<h3 id="pagoefectivo-sdk-tratamiento-de-errores"><strong>PagoEfectivo SDK | Tratamiento de Errores</strong><a class="headerlink" href="#pagoefectivo-sdk-tratamiento-de-errores" title="Permanent link">&para;</a></h3>
<hr />
<p>Para la implementación de <em>generateCip()</em> y <em>searchCip()</em> fueron necesarios el uso de sus respectivos listener <em>(CipListener &amp; SearchListener)</em> los cuales tienen en común una función para el tratamiento de errores <strong><em>OnCipError()</em></strong>.</p>
<p><strong><em>OnCipError()</em></strong> devuelve una lista de objetos de tipo CipError. El cual tiene 3 campos básicos:</p>
<ul>
<li>code --&gt; Código del error generado</li>
<li>field --&gt; Campo Errado o Sección errada</li>
<li>message --&gt; Descripción del error</li>
</ul>
<p>Al ser una lista, esta se puede recorrer listando así el(los) error(es) que se puedan generar al llamar las funciones respectivas del SDK.</p>
<p><strong>Java</strong>
<img alt="ciperror" src="./assets/cipErrorJava.png" /></p>
<p><strong>Kotlin</strong>
<img alt="ciperror" src="./assets/cipErrorKotlin.png" /></p>
<h3 id="pagoefectivo-sdk-proguard-configurations"><strong>PagoEfectivo SDK | Proguard Configurations</strong><a class="headerlink" href="#pagoefectivo-sdk-proguard-configurations" title="Permanent link">&para;</a></h3>
<hr />
<p>Si está usando ProGuard en su proyecto agregue las siguientes líneas a su archivo de configuración Proguard:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>-keep class pe.kdsep.** { *; }
-dontwarn javax.annotation.**
-dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement
</pre></div>
</td></tr></table>

<blockquote>
<p>Cualquier duda puedes escribirnos a: <a href="mailto:feedback@pagoefectivo.pe">feedback@pagoefectivo.pe</a>.</p>
</blockquote>







            </article>
          </div>
        </div>
      </main>


<footer class="md-footer">

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">

          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 Orbis Mobile
          </div>

        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>


  <div class="md-footer-social">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

      <a href="https://github.com/PagoEfectivo" class="md-footer-social__link fa fa-github"></a>

      <a href="https://twitter.com/pagoefectivope" class="md-footer-social__link fa fa-twitter"></a>

  </div>


    </div>
  </div>
</footer>

    </div>

      <script src="./assets/javascripts/application-8e4952e681.js"></script>




          <script src="./assets/javascripts/lunr/lunr.stemmer.support.js"></script>



              <script src="./assets/javascripts/lunr/lunr.es.js"></script>





      <script>app.initialize({version:"0.17.1",url:{base:"."}})</script>




      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-109449567-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>


  </body>
</html>